<!DOCTYPE html>
<html>
  <body>
    <p id="coordinates"></p>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/paho-mqtt/1.1.0/mqtt.min.js"></script>

    <script>
      var coordinatesElement = document.getElementById("coordinates");
      var mqttClient;

      // Connect to MQTT broker
      mqttClient = new Paho.MQTT.Client(
        "mqtt://broker.emqx.io",
        8083,
        "gps-mqtt-500"
      );
      mqttClient.connect({ onSuccess: onConnect });

      function onConnect() {
        mqttClient.subscribe("/RESTful");
        mqttClient.onMessageArrived = onMessageArrived;
      }

      function onMessageArrived(message) {
        var data = JSON.parse(message.payloadString);
        var latitude = data.latitude;
        var longitude = data.longitude;

        coordinatesElement.innerHTML =
          "Latitude: " + latitude + "<br>Longitude: " + longitude;
      }
    </script>
  </body>
</html>
